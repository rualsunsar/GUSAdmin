(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-48870ed6"],{"7d7a":function(s,t,e){"use strict";e("caed")},caed:function(s,t,e){},e1c0:function(s,t,e){"use strict";e.r(t);var a=function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("div",{staticClass:"chat"},[e("div",{staticClass:"chat-head"},[s._v("\n    讲文明、树新风 ( "+s._s(s.chat_names.length)+" )\n  ")]),s._v(" "),e("div",{staticClass:"chat-body"},[e("div",{staticClass:"chat-body-l"},[e("div",{ref:"chatBodyMsg",staticClass:"chat-body-msg over-scroll"},s._l(s.chat_msgs,(function(t,a){return e("div",{key:a},[12===t.type_id&&t.name!==s.chat_name?e("div",{staticClass:"chat-user-msg"},[e("div",{staticClass:"name-time"},[e("span",[s._v(s._s(t.name))]),s._v(" "),e("span",[s._v(s._s(t.time))])]),s._v(" "),e("div",{staticClass:"msg-user-box"},[e("pre",[s._v(s._s(t.msg))])])]):s._e(),s._v(" "),0===t.type_id?e("p",{staticClass:"enter-user-msg"},[s._v(s._s(t.msg))]):s._e(),s._v(" "),12===t.type_id&&t.name===s.chat_name?e("div",{staticClass:"chat-me-msg"},[e("div",{staticClass:"name-time"},[e("span",[s._v(s._s(t.time))]),s._v(" "),e("span",[s._v(s._s(t.name))])]),s._v(" "),e("div",{staticClass:"msg-me-box"},[e("pre",[s._v(s._s(t.msg))])])]):s._e()])})),0),s._v(" "),e("div",{staticClass:"chat-body-tx"},[e("textarea",s._g({directives:[{name:"model",rawName:"v-model",value:s.msg,expression:"msg"}],staticClass:"chat-msg over-scroll",attrs:{maxlength:"500",placeholder:"说点什么..."},domProps:{value:s.msg},on:{input:function(t){t.target.composing||(s.msg=t.target.value)}}},{keypress:s.enterMsg,focus:s.handleHideTip,blur:s.handleShowTip})),s._v(" "),s.showTip?e("span",{ref:"msgTip",staticClass:"msg-tip"},[s._v("按Enter发送、Ctrl + Enter换行")]):s._e()])]),s._v(" "),e("div",{staticClass:"chat-body-r over-scroll"},[e("ul",s._l(s.chat_names,(function(t,a){return e("li",{key:a},[t===s.chat_name?e("span",{staticStyle:{color:"#1d8df4"}},[s._v(s._s(t))]):e("span",[s._v(s._s(t))])])})),0)])])])},i=[],n=e("5530"),c=e("b2eb"),o=e("2f62"),h=e("5c96"),r={name:"Chat",data:function(){return{allowSend:!0,showTip:!0,msg:""}},computed:Object(n["a"])({},Object(o["b"])({chat_name:"chat_name",chat_names:"chat_names",chat_msgs:"chat_msgs",token:"token"})),watch:{chat_msgs:function(){var s=this;this.$nextTick((function(){s.$refs.chatBodyMsg.scrollTop=s.$refs.chatBodyMsg.scrollHeight}))}},mounted:function(){Object(c["a"])(),window.addEventListener("chatMessage",this.getMsg)},destroyed:function(){window.removeEventListener("chatMessage",this.getMsg)},methods:{getMsg:function(s){var t=JSON.parse(JSON.parse(s.detail));this.$store.dispatch("chat/pushChatMsg",t)},enterMsg:function(s){var t=this;if(13===s.keyCode&&s.ctrlKey||10===s.keyCode)this.msg+="\n";else if(13===s.keyCode){if(s.preventDefault(),""===this.msg)return h["Message"].info("请输入内容");if(!this.allowSend)return h["Message"].info("发送频率过快");this.allowSend=!1;var e={type_id:12,name:this.chat_name,time:this.parseTime(new Date),msg:this.msg};Object(c["b"])(e),this.msg="",setTimeout((function(){t.allowSend=!0}),2e3)}},handleShowTip:function(){this.showTip=!0},handleHideTip:function(){this.showTip=!1}}},d=r,l=(e("7d7a"),e("2877")),m=Object(l["a"])(d,a,i,!1,null,"7374c355",null);t["default"]=m.exports}}]);